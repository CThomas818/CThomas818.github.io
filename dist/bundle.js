!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e,t,n,o,i){this.name=e,this.content=t,this.latitude=n,this.longitude=o,this._id=i}create_content(){return'<div style="text-align: right;"><i id="edit-button" class="fa fa-pencil" aria-hidden="true" style="cursor: pointer; padding-right: 14px;"></i><i id="delete-button" class="fa fa-trash-o" aria-hidden="true" style="cursor: pointer;"></i></div><b>'+this.name+"</b><br><br>"+this.content}create_form(){return'<form id="myForm" method="post" action="https://radiant-mesa-71731.herokuapp.com/locations/'+this._id+'"><input id="name-field" type="text" name="name" placeholder = "Where did you visit?"><br><textarea id="content-field" type="text" name="content" style="height: 100px; width: 250px" placeholder="Say something about this place!"></textarea><br><input type="submit" value="Submit"></form>'}add_listeners(e,t){this.create_content();var n=this.create_form(),o=this._id,i=this.name,a=this.content;this.add_delete_button_listener(o,t),$("#edit-button").on("click",function(){e.setContent(n),$("#myForm").on("submit",function(){return $.post($(this).attr("action"),$(this).serialize(),function(e){console.log("edited marker: "+i),location.reload()},"json"),!1}),"New Place"==i&&"Write about your memories here!"==a||($("#name-field").val(i),$("#content-field").val(a))})}add_delete_button_listener(e,t){$("#delete-button").on("click",function(){$.ajax({url:"https://radiant-mesa-71731.herokuapp.com/locations/"+e,type:"DELETE",success:function(n){t.setMap(null),console.log("removed marker: "+e)}})})}}t.Marker=o,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);var i=[],a=new Array;window.initMap=function(){$.getJSON("https://radiant-mesa-71731.herokuapp.com/locations",function(e){$.each(e,function(e,t){var n=new o.Marker(t.name,t.content,t.latitude,t.longitude,t._id);a.push(n)});var t=new google.maps.Map(document.getElementById("map"),{zoom:12,center:new google.maps.LatLng(48.435243,-123.367508)});google.maps.event.addListener(t,"click",function(e){!function(e,t,n){var a=new google.maps.InfoWindow;console.log(typeof a);let r=new google.maps.Marker({position:e,map:n});$.ajax({url:"https://radiant-mesa-71731.herokuapp.com/locations/",type:"POST",data:{name:"New Place",latitude:e.lat(),longitude:e.lng(),content:"Write about your memories here!"},success:function(e){i.push(r),r.setMap(n);var s=new o.Marker(e.name,e.content,e.latitude,e.longitude,e._id);t.push(s),google.maps.event.addListener(r,"click",function(e,t,o){return function(){var t=s.create_content();e.open(n,o),e.setContent(t),s.add_listeners(e,o)}}(a,0,r))}})}(e.latLng,a,t),console.log(typeof e)}),function(e,t){var n,o,a=new google.maps.InfoWindow;for(o=0;o<e.length;o++){n=new google.maps.Marker({position:new google.maps.LatLng(e[o].latitude,e[o].longitude),map:t}),i.push(n);var r=e[o];google.maps.event.addListener(n,"click",function(e,n,o){return function(){var i=n.create_content();e.open(t,o),e.setContent(i),n.add_listeners(e,o)}}(a,r,n))}}(a,t),$(".spinner").remove()})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcmtlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTWFya2VyIiwiW29iamVjdCBPYmplY3RdIiwiY29udGVudCIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiX2lkIiwidGhpcyIsImluZm93aW5kb3ciLCJtYXJrZXIiLCJjcmVhdGVfY29udGVudCIsImZvcm1fc3RyaW5nIiwiY3JlYXRlX2Zvcm0iLCJhZGRfZGVsZXRlX2J1dHRvbl9saXN0ZW5lciIsIiQiLCJvbiIsInNldENvbnRlbnQiLCJwb3N0IiwiYXR0ciIsInNlcmlhbGl6ZSIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsImxvY2F0aW9uIiwicmVsb2FkIiwidmFsIiwiYWpheCIsInVybCIsInR5cGUiLCJzdWNjZXNzIiwicmVzdWx0Iiwic2V0TWFwIiwiZGVmYXVsdCIsIm1hcmtlcl8xIiwibWFya2VycyIsImxvY2F0aW9uc19hcnJheSIsIkFycmF5Iiwid2luZG93IiwiaW5pdE1hcCIsImdldEpTT04iLCJkYXRhIiwiZWFjaCIsIm9iaiIsIm1hcmtlck9iaiIsInB1c2giLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJMYXRMbmciLCJldmVudCIsImFkZExpc3RlbmVyIiwiSW5mb1dpbmRvdyIsInBvc2l0aW9uIiwibGF0IiwibG5nIiwiY29udGVudF9zdHJpbmciLCJvcGVuIiwiYWRkX2xpc3RlbmVycyIsInBsYWNlX21hcmtlciIsImxhdExuZyIsImxlbmd0aCIsInB1bGxfbWFya2VycyIsInJlbW92ZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFBQWIsRUFBQSxjQUFpRGtCLE9BQUEsS0FJakRwQixFQUFBcUIsRUFBQSxTQUFBbEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBbUIsV0FDQSxXQUEyQixPQUFBbkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVUsRUFBQUMsR0FBc0QsT0FBQVYsT0FBQVcsVUFBQUMsZUFBQW5CLEtBQUFnQixFQUFBQyxJQUd0RHhCLEVBQUEyQixFQUFBLEdBSUEzQixJQUFBNEIsRUFBQSx5RkM3REFDLEVBV0VDLFlBQW1CbkIsRUFBcUJvQixFQUF3QkMsRUFBeUJDLEVBQTBCQyxH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RUFBV0MsSUFOSSxDQVM1Q0QsRUFBV21DLEVBQVVsQyxPQS9GdEJzRCxDQUFhVCxFQUFNVSxPQUFRN0IsRUFBaUJVLEdBQzVDeEIsUUFBUUMsV0FBV2dDLEtBd0IzQixTQUFzQm5CLEVBQWlCVSxHQUVyQyxJQUNJcEMsRUFBUWpDLEVBRFJnQyxFQUFhLElBQUlzQyxPQUFPQyxLQUFLUyxXQUlqQyxJQUFLaEYsRUFBSSxFQUFHQSxFQUFJMkQsRUFBZ0I4QixPQUFRekYsSUFBSyxDQUN6Q2lDLEVBQVMsSUFBSXFDLE9BQU9DLEtBQUs5QyxRQUNwQndELFNBQVUsSUFBSVgsT0FBT0MsS0FBS00sT0FBT2xCLEVBQWdCM0QsR0FBRzRCLFNBQVUrQixFQUFnQjNELEdBQUc2QixXQUNqRndDLElBQUtBLElBR1ZYLEVBQVFVLEtBQUtuQyxHQUNiLElBQUlrQyxFQUFZUixFQUFnQjNELEdBR2hDc0UsT0FBT0MsS0FBS08sTUFBTUMsWUFBWTlDLEVBQVEsUUFBUyxTQUFVRCxFQUFXbUMsRUFBVWxDLEdBQ3pFLE9BQU8sV0FFSixJQUFJbUQsRUFBaUJqQixFQUFVakMsaUJBQy9CRixFQUFXcUQsS0FBS2hCLEVBQUtwQyxHQUNyQkQsRUFBV1EsV0FBVzRDLEdBQ3RCakIsRUFBVW1CLGNBQWN0RCxFQUFXQyxJQU5JLENBUzVDRCxFQUFXbUMsRUFBVWxDLEtBN0N4QnlELENBQWEvQixFQUFpQlUsR0FDOUIvQixFQUFFLFlBQVlxRCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiLyoqXHJcbiAqIFxyXG4gKiBcclxuICogQGV4cG9ydFxyXG4gKiBAY2xhc3MgTWFya2VyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWFya2VyIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBNYXJrZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhdGl0dWRlIFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBsb25naXR1ZGUgXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IF9pZCBcclxuICAgKiBAbWVtYmVyb2YgTWFya2VyXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgcHVibGljIGNvbnRlbnQ6IHN0cmluZywgcHVibGljIGxhdGl0dWRlOiBvYmplY3QsIHB1YmxpYyBsb25naXR1ZGU6IG9iamVjdCwgcHVibGljIF9pZDogc3RyaW5nKXtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBjb250ZW50IHN0cmluZyB1c2luZyBNYXJrZXIgcHJvcGVydGllcy5cclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBcclxuICAgKiBAbWVtYmVyb2YgTWFya2VyXHJcbiAgICovXHJcbiAgY3JlYXRlX2NvbnRlbnQoKXtcclxuICAgIHZhciBjb250ZW50X3N0cmluZyA9ICc8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7XCI+PGkgaWQ9XCJlZGl0LWJ1dHRvblwiIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7IHBhZGRpbmctcmlnaHQ6IDE0cHg7XCI+PC9pPicgK1xyXG4gICAgJzxpIGlkPVwiZGVsZXRlLWJ1dHRvblwiIGNsYXNzPVwiZmEgZmEtdHJhc2gtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyO1wiPjwvaT48L2Rpdj4nICtcclxuICAgICcnICtcclxuICAgICc8Yj4nK3RoaXMubmFtZSsnPC9iPicgK1xyXG4gICAgJzxicj48YnI+JyArXHJcbiAgICB0aGlzLmNvbnRlbnQ7XHJcblxyXG4gICAgcmV0dXJuIGNvbnRlbnRfc3RyaW5nO1xyXG5cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGZvcm0gaHRtbCBzdHJpbmcgdG8gYmUgdXNlZCBpbiB0aGUgbWFya2VyLlxyXG4gICAqIFxyXG4gICAqIEByZXR1cm5zIFxyXG4gICAqIEBtZW1iZXJvZiBNYXJrZXJcclxuICAgKi9cclxuICBjcmVhdGVfZm9ybSgpe1xyXG5cclxuICAgIHZhciBfaWQgPSB0aGlzLl9pZDtcclxuXHJcbiAgICB2YXIgZm9ybV9zdHJpbmcgPSAnPGZvcm0gaWQ9XCJteUZvcm1cIiBtZXRob2Q9XCJwb3N0XCIgYWN0aW9uPVwiaHR0cHM6Ly9yYWRpYW50LW1lc2EtNzE3MzEuaGVyb2t1YXBwLmNvbS9sb2NhdGlvbnMvJytfaWQrJ1wiPicgK1xyXG4gICAgICAgICAnPGlucHV0IGlkPVwibmFtZS1maWVsZFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIm5hbWVcIiBwbGFjZWhvbGRlciA9IFwiV2hlcmUgZGlkIHlvdSB2aXNpdD9cIj4nICtcclxuICAgICAgICAgJzxicj4nICtcclxuICAgICAgICAgJzx0ZXh0YXJlYSBpZD1cImNvbnRlbnQtZmllbGRcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJjb250ZW50XCIgc3R5bGU9XCJoZWlnaHQ6IDEwMHB4OyB3aWR0aDogMjUwcHhcIiBwbGFjZWhvbGRlcj1cIlNheSBzb21ldGhpbmcgYWJvdXQgdGhpcyBwbGFjZSFcIj48L3RleHRhcmVhPicgK1xyXG4gICAgICAgICAnPGJyPicgK1xyXG4gICAgICAgICAnPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIlN1Ym1pdFwiPicgK1xyXG4gICAgICAgJzwvZm9ybT4nO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm1fc3RyaW5nO1xyXG5cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQWRkcyBldmVudCBsaXN0ZW5lcnMgdG8gYSBtYXJrZXIuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHsqfSBpbmZvd2luZG93IFxyXG4gICAqIEBwYXJhbSB7Kn0gbWFya2VyIFxyXG4gICAqIEBtZW1iZXJvZiBNYXJrZXJcclxuICAgKi9cclxuICBhZGRfbGlzdGVuZXJzKGluZm93aW5kb3c6IGFueSwgbWFya2VyOiBhbnkpe1xyXG5cclxuICAgIHZhciBjb250ZW50X3N0cmluZyA9IHRoaXMuY3JlYXRlX2NvbnRlbnQoKTtcclxuICAgIHZhciBmb3JtX3N0cmluZyA9IHRoaXMuY3JlYXRlX2Zvcm0oKTtcclxuICAgIHZhciBfaWQgPSB0aGlzLl9pZDtcclxuICAgIHZhciBuYW1lID0gdGhpcy5uYW1lO1xyXG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7XHJcbiAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5hZGRfZGVsZXRlX2J1dHRvbl9saXN0ZW5lcihfaWQsIG1hcmtlcilcclxuXHJcbiAgICAvL0FkZCB0aGUgZWRpdCBidXR0b24gbGlzdGVuZXJcclxuICAgICQoJyNlZGl0LWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgIGluZm93aW5kb3cuc2V0Q29udGVudChmb3JtX3N0cmluZyk7XHJcbiAgICAgIC8vTWFraW5nIGEgSnF1ZXJ5IHBvc3QgZm9yIHN1Ym1pdHRpbmcgYSBmb3JtIHRvIHRoZSBhcGksIHVwZGF0aW5nIHRoZSBpbmZvd2luZG93IHdpdGggbmV3IGNvbnRlbnQuXHJcbiAgICAgICQoJyNteUZvcm0nKS5vbignc3VibWl0JywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkLnBvc3QoJCh0aGlzKS5hdHRyKCdhY3Rpb24nKSwgJCh0aGlzKS5zZXJpYWxpemUoKSwgZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgIC8vUmVmcmVzaCBvciBzb21ldGhpbmcuXHJcbiAgICAgICAgICAgY29uc29sZS5sb2coXCJlZGl0ZWQgbWFya2VyOiBcIituYW1lKTtcclxuICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9LCdqc29uJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgICBpZihuYW1lICE9IFwiTmV3IFBsYWNlXCIgfHwgY29udGVudCAhPSBcIldyaXRlIGFib3V0IHlvdXIgbWVtb3JpZXMgaGVyZSFcIil7XHJcbiAgICAgICAkKCcjbmFtZS1maWVsZCcpLnZhbChuYW1lKTtcclxuICAgICAgICQoJyNjb250ZW50LWZpZWxkJykudmFsKGNvbnRlbnQpO1xyXG4gICAgIH1cclxuICAgfSlcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBsaXN0ZW5lciB0byB0aGUgZGVsZXRlLWJ1dHRvbiB3aXRoaW4gYSBtYXJrZXIuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IF9pZCBcclxuICAgKiBAcGFyYW0geyp9IG1hcmtlciBcclxuICAgKiBAbWVtYmVyb2YgTWFya2VyXHJcbiAgICovXHJcbiAgYWRkX2RlbGV0ZV9idXR0b25fbGlzdGVuZXIoX2lkOiBzdHJpbmcsIG1hcmtlcjogYW55KXtcclxuICAgIC8vRGVsZXRpbmcgYSBtYXJrZXIgbGlzdGVuZXIuXHJcbiAgICAkKCcjZGVsZXRlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vcmFkaWFudC1tZXNhLTcxNzMxLmhlcm9rdWFwcC5jb20vbG9jYXRpb25zL1wiKyBfaWQsXHJcbiAgICAgICAgdHlwZTogXCJERUxFVEVcIixcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgLy9SZWZyZXNoIG9yIHNvbWV0aGluZ1xyXG4gICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVtb3ZlZCBtYXJrZXI6IFwiK19pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNYXJrZXI7IiwiaW1wb3J0IHtNYXJrZXJ9IGZyb20gXCIuL21hcmtlclwiXHJcblxyXG52YXIgbWFya2VycyA9IFtdO1xyXG5cclxudmFyIGxvY2F0aW9uc19hcnJheSA9IG5ldyBBcnJheSgpO1xyXG5cclxuKDxhbnk+d2luZG93KS5pbml0TWFwID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIC8vR2V0dGluZyB0aGUgbG9jYXRpb25zIGZyb20gdGhlIEFQSSBhcyBKU09OLCB0aGVuIHB1c2hpbmcgZWFjaCBsb2NhdGlvbiB0byBhbiBhcnJheS5cclxuICAkLmdldEpTT04oXCJodHRwczovL3JhZGlhbnQtbWVzYS03MTczMS5oZXJva3VhcHAuY29tL2xvY2F0aW9uc1wiLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihpLCBvYmope1xyXG4gICAgICAgIHZhciBtYXJrZXJPYmogPSBuZXcgTWFya2VyKG9iai5uYW1lLCBvYmouY29udGVudCwgb2JqLmxhdGl0dWRlLCBvYmoubG9uZ2l0dWRlLCBvYmouX2lkKTtcclxuICAgICAgICBsb2NhdGlvbnNfYXJyYXkucHVzaChtYXJrZXJPYmopO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xyXG4gICAgICAgem9vbTogMTIsXHJcbiAgICAgICBjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoNDguNDM1MjQzLCAtMTIzLjM2NzUwOCksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgcGxhY2VfbWFya2VyKGV2ZW50LmxhdExuZywgbG9jYXRpb25zX2FycmF5LCBtYXApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHR5cGVvZiBldmVudCk7XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIHB1bGxfbWFya2Vycyhsb2NhdGlvbnNfYXJyYXksIG1hcCk7XHJcbiAgICAgICQoJy5zcGlubmVyJykucmVtb3ZlKCk7XHJcbiAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgYSBtYXJrZXIgdG8gbnVsbCwgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgZ29vZ2xlIG1hcC5cclxuICogXHJcbiAqIEBwYXJhbSB7YW55fSBtYXJrZXIgXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVNYXJrZXIobWFya2VyKXtcclxuICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVGhpcyBmdW5jdGlvbiBwdWxscyBlYWNoIG1hcmtlciBvbnRvIHRoZSBtYXAgZnJvbSB0aGUgbG9jYXRpb25zX2FycmF5LlxyXG4gKiBcclxuICogQHBhcmFtIHthbnl9IGxvY2F0aW9uc19hcnJheSBcclxuICogQHBhcmFtIHthbnl9IG1hcCBcclxuICovXHJcbmZ1bmN0aW9uIHB1bGxfbWFya2Vycyhsb2NhdGlvbnNfYXJyYXksIG1hcCl7XHJcblxyXG4gIHZhciBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3c7XHJcbiAgdmFyIG1hcmtlciwgaTtcclxuXHJcbiAgLy9QbGFjaW5nIHRoZSBtYXJrZXJzXHJcbiAgZm9yIChpID0gMDsgaSA8IGxvY2F0aW9uc19hcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbnNfYXJyYXlbaV0ubGF0aXR1ZGUsIGxvY2F0aW9uc19hcnJheVtpXS5sb25naXR1ZGUpLFxyXG4gICAgICAgICAgIG1hcDogbWFwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcik7XHJcbiAgICAgIHZhciBtYXJrZXJPYmogPSBsb2NhdGlvbnNfYXJyYXlbaV07XHJcblxyXG4gICAgICAvL1NldHRpbmcgdGhlIGdvb2dsZSBtYXBzIGluZm93aW5kb3cgKGFwcGVhcnMgd2hlbiBjbGlja2VkKSBvZiB0aGUgbWFya2VyIGJhc2VkIG9uIHRoZSBpbmRleCBvZiB0aGUgYXJyYXksIGkuXHJcbiAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKGZ1bmN0aW9uKGluZm93aW5kb3csbWFya2VyT2JqLG1hcmtlcikge1xyXG4gICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIGNvbnRlbnRfc3RyaW5nID0gbWFya2VyT2JqLmNyZWF0ZV9jb250ZW50KCk7XHJcbiAgICAgICAgICAgICAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcclxuICAgICAgICAgICAgICBpbmZvd2luZG93LnNldENvbnRlbnQoY29udGVudF9zdHJpbmcpO1xyXG4gICAgICAgICAgICAgIG1hcmtlck9iai5hZGRfbGlzdGVuZXJzKGluZm93aW5kb3csbWFya2VyKTtcclxuXHJcbiAgICAgICAgICAgfVxyXG4gICAgICB9KShpbmZvd2luZG93LG1hcmtlck9iaixtYXJrZXIpKTtcclxuXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUGxhY2VzIGEgbWFya2VyIHdpdGggdGhlIHNwZWNpZmllZCBsb2NhdGlvbiAobGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSkgb250byB0aGUgbWFwLlxyXG4gKiBcclxuICogQHBhcmFtIHthbnl9IGxvY2F0aW9uIFxyXG4gKiBAcGFyYW0ge2FueX0gbG9jYXRpb25zX2FycmF5IFxyXG4gKiBAcGFyYW0ge2FueX0gbWFwIFxyXG4gKi9cclxuZnVuY3Rpb24gcGxhY2VfbWFya2VyKGxvY2F0aW9uLCBsb2NhdGlvbnNfYXJyYXksIG1hcCl7XHJcblxyXG4gIHZhciBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3c7XHJcbiAgY29uc29sZS5sb2codHlwZW9mIGluZm93aW5kb3cpO1xyXG5cclxuICBsZXQgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICBwb3NpdGlvbjogbG9jYXRpb24sXHJcbiAgICAgICBtYXA6IG1hcFxyXG4gIH0pO1xyXG5cclxuICAvL0RlZmF1bHQgbWFya2VyIGNvbnRlbnQuXHJcbiAgJC5hamF4KHtcclxuICAgIHVybDogXCJodHRwczovL3JhZGlhbnQtbWVzYS03MTczMS5oZXJva3VhcHAuY29tL2xvY2F0aW9ucy9cIixcclxuICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgZGF0YToge25hbWU6IFwiTmV3IFBsYWNlXCIsIGxhdGl0dWRlOiBsb2NhdGlvbi5sYXQoKSwgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sbmcoKSwgY29udGVudDogXCJXcml0ZSBhYm91dCB5b3VyIG1lbW9yaWVzIGhlcmUhXCJ9LFxyXG4gICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KXtcclxuXHJcbiAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gICAgICBtYXJrZXIuc2V0TWFwKG1hcCk7XHJcblxyXG4gICAgICB2YXIgbWFya2VyT2JqID0gbmV3IE1hcmtlcihyZXN1bHQubmFtZSwgcmVzdWx0LmNvbnRlbnQsIHJlc3VsdC5sYXRpdHVkZSwgcmVzdWx0LmxvbmdpdHVkZSwgcmVzdWx0Ll9pZCk7XHJcbiAgICAgIGxvY2F0aW9uc19hcnJheS5wdXNoKG1hcmtlck9iaik7XHJcblxyXG5cclxuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCAoZnVuY3Rpb24oaW5mb3dpbmRvdyxjb250ZW50X3N0cmluZyxtYXJrZXIpIHtcclxuICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBjb250ZW50X3N0cmluZyA9IG1hcmtlck9iai5jcmVhdGVfY29udGVudCgpO1xyXG4gICAgICAgICAgICAgIGluZm93aW5kb3cub3BlbihtYXAsIG1hcmtlcik7XHJcbiAgICAgICAgICAgICAgaW5mb3dpbmRvdy5zZXRDb250ZW50KGNvbnRlbnRfc3RyaW5nKTtcclxuICAgICAgICAgICAgICBtYXJrZXJPYmouYWRkX2xpc3RlbmVycyhpbmZvd2luZG93LG1hcmtlcik7XHJcblxyXG4gICAgICAgICAgIH1cclxuICAgICAgfSkoaW5mb3dpbmRvdyxtYXJrZXJPYmosbWFya2VyKSk7XHJcblxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlZnJlc2hlcyB0aGUgd2luZG93LlxyXG4gKiBcclxuICogQHBhcmFtIHthbnl9IG1hcCBcclxuICovXHJcbmZ1bmN0aW9uIHJlZnJlc2hfcGFnZShtYXApe1xyXG4gIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=